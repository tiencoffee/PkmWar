var Move,Pkd,Pkm,Stat,Type,bootState,game,isStarted,loadState,pkms,playState,selPkd;Type=null,Stat=null,Move=null,Pkd=null,game=null,selPkd=null,isStarted=!1,pkms=[],bootState={preload(){game.load.json("Type","models/Type.json"),game.load.json("Stat","models/Stat.json"),game.load.json("Move","models/Move.json"),game.load.json("Pkd","models/Pkd.json")},create(){var e,a;for(e in Type=game.cache.getJSON("Type"),Stat=game.cache.getJSON("Stat"),Move=game.cache.getJSON("Move"),Pkd=game.cache.getJSON("Pkd"))(a=Pkd[e]).moves=a.moves.filter(e=>this.movesEnabled.includes(e)).map(e=>Move[e]);Vue.mixin({created(){var e;e=document.createElement("div"),document.body.appendChild(e),this.$mount(e)},destroyed(){this.$el.remove()}}),game.physics.startSystem(Phaser.Physics.ARCADE),game.state.start("load")},movesEnabled:["tackle"]},loadState={preload(){var e,a,t,s;for(s of(game.load.image("pkdIcon","assets/pkdIcon.png"),game.load.image("none","assets/none.png"),game.load.bitmapFont("fipps","fonts/fipps.png","fonts/fipps.xml"),this.assets.move))"string"==typeof s&&(s=[s,32,32]),game.load.spritesheet(s,`assets/move/${s[0]}.png`,s[1],s[2]);for(e in Pkd)t=(a=Pkd[e]).largeSprite?64:32,game.load.spritesheet(e,`assets/pkd/${a.no}.png`,t,t,8)},create(){game.state.start("play")},assets:{move:["acid","ball","ball-1","bell","bone","bone-boomerang","claw","cut","dragon-pulse","evil","explosive","explosive-1","eye","fairy","heart","hit","ice-break","meteor","rock","scratch","shadow-ball","soap-bubble","soul","spider-web","spin","spin-1","sting","stone",["tornado",32,64],"toxic"]}},playState={create(){var e,a;selPkd=Pkd.bulbasaur,(e=game.add.graphics()).beginFill(16007990),e.drawRect(0,0,game.world.centerX,game.height),e.beginFill(38536),e.drawRect(game.world.centerX,0,game.world.centerX,game.height),e.beginFill(13421772),e.drawRect(game.world.centerX-10,0,20,game.height),e.drawCircle(game.world.centerX,game.world.centerY,192),e.beginFill(12303291),e.drawCircle(game.world.centerX,game.world.centerY,160),e.endFill(),e.inputEnabled=!0,e.events.onInputDown.add((e,a)=>{var t,s;s=+(a.positionDown.x<game.world.centerX),t=new Pkm(game,selPkd.name,a.positionDown.x,a.positionDown.y,Phaser[["LEFT","RIGHT"][s]],s),pkms.add(t),isStarted&&t.randomWalk()}),game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(()=>{a.$children[0].toggle()}),pkms=game.add.group(),a=new Vue({template:"<Play/>",components:["url:components/Play.vue"]})},update(){game.physics.arcade.collide(pkms),pkms.sort("y",Phaser.Group.SORT_ASCENDING)}},(game=new Phaser.Game({width:window.innerWidth,height:window.innerHeight,renderer:Phaser.AUTO,antialias:!1,scaleMode:Phaser.ScaleManager.SHOW_ALL})).state.add("boot",bootState,!0),game.state.add("load",loadState),game.state.add("play",playState),Pkm=class extends Phaser.Sprite{constructor(e,a,t,s,o,d){var i;super(e,t,s,a),this.team=d,this.pkd=Pkd[a],this.target=[],this.scale.set(3),this.anchor.set(.5,.75),this.smoothed=!1,this.animations.add("walk-1",[0,1],8,!0),this.animations.add("walk-2",[2,3],8,!0),this.animations.add("walk-3",[4,5],8,!0),this.animations.add("walk-4",[6,7],8,!0),this.game.physics.arcade.enableBody(this),i=this.width/this.scale.x/4,this.body.setCircle(i,i,2*i),this.body.collideWorldBounds=!0,this.body.allowGravity=!1,this.body.mass=1+this.pkd.weight/1e3,this.setD(o),this.body.onMoveComplete.add(()=>{this.randomWalk()}),this.body.onWorldBounds=new Phaser.Signal,this.body.onWorldBounds.add(()=>{this.body.stopMovement()}),this.body.onCollide=new Phaser.Signal,this.body.onCollide.add(e=>{this.team===e.team?this.collideAlly(e):this.collideEnemy(e)}),this.grpMove=e.make.group(this)}setD(e){this.d=e,this.frame=2*(this.d-1),this.body.angle=[,Math.PI,0,-Phaser.Math.HALF_PI,Phaser.Math.HALF_PI][this.d]}walk(e,a){a&&this.setD(a),this.body.moveTo(500*e/this.pkd.stats.spe,e),this.animations.play(`walk-${this.d}`)}randomWalk(){this.body.isMoving||this.walk(Phaser.Math.between(10,300),Phaser.Math.between(1,4))}collideAlly(e){this.body.stopMovement()}collideEnemy(e){this.target=e,this.fight()}fight(){}update(){}};